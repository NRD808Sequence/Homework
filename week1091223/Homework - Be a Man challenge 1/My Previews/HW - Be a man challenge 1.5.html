#!/bin/bash
# Use this for your user data (script from top to bottom)
# install httpd (Linux 2 version)
yum update -y
yum install -y httpd
systemctl start httpd
systemctl enable httpd

# Get the IMDSv2 token
TOKEN=$(curl -X PUT "http://169.254.169.254/latest/api/token" -H "X-aws-ec2-metadata-token-ttl-seconds: 21600")

# Background the curl requests
curl -H "X-aws-ec2-metadata-token: $TOKEN" -s http://169.254.169.254/latest/meta-data/local-ipv4 &> /tmp/local_ipv4 &
curl -H "X-aws-ec2-metadata-token: $TOKEN" -s http://169.254.169.254/latest/meta-data/placement/availability-zone &> /tmp/az &
curl -H "X-aws-ec2-metadata-token: $TOKEN" -s http://169.254.169.254/latest/meta-data/network/interfaces/macs/ &> /tmp/macid &
wait

macid=$(cat /tmp/macid)
local_ipv4=$(cat /tmp/local_ipv4)
az=$(cat /tmp/az)
vpc=$(curl -H "X-aws-ec2-metadata-token: $TOKEN" -s http://169.254.169.254/latest/meta-data/network/interfaces/macs/${macid}/vpc-id)

echo "
<!doctype html>
<html lang=\"en\" class=\"h-100\">
<head>
<title>Details for EC2 instance</title>
</head>
<body>
<div>
<h1>AWS Instance Details</h1>
<h1>Samurai Katana</h1>

<br>
 <b><h1  style="text-align:center;"></p>I found my wife on a party yacht in Columbia
<video width="320" height="240" controls>
<source src="https://img-9gag-fun.9cache.com/photo/apop6xn_460sv.mp4" type="video/mp4">
<source src="https://img-9gag-fun.9cache.com/photo/apop6xn_460sv.mp4" type="video/ogg"> Your browser does not support the video tag. </video>
<br>    <!DOCTYPE html>
Her name is Pricilla
    <html>
    <head>
    <title>Background Image Example</title>
    <style>
      body {
        background-image: url("https://wallpapers.com/images/hd/brazilian-beach-1920-x-1271-wallpaper-rnr8j0kllsxhgenj.jpg"); /* Replace with your image path */
        background-repeat: no-repeat; /* Prevents the image from repeating */
        background-size: cover; /* Scales the image to cover the entire background */
        background-position: center; /* Centers the image */
      }
    </style>
    </head>
    <body>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>



        
<b><h1  style="text-align:center;">Brazil or Bust!</p>
    <h1 style="text-align:center;">I Nikolas, thank Theo WAF, and Roberto, Aaron for teaching me about EC2s! I will net $250k per year!</h1><p style="color: #e6f200;"></p><b>
<br><b><p style="color: #000000;"</p>I will go to this part of Columbia: 
<img src="https://weekend-bucket.s3.amazonaws.com/small_Plan_Ruta_Tisquizoque_1_0e409521d9.jpg">
<br>
Florián is one of Colombia’s most stunning and impressive climbing areas, but also one of the quietest. Set in the mountains, Florián is an incredibly beautiful place, the scenery alone would make it worth a visit. There is dense jungle full of colourful birds, huge waterfalls, natural swimming pools and of course loads of crags! The journey to get to Florián is also interesting, it takes around 3 hours on unpaved roads from Puente Nacional, local communal 4x4s and tank like buses cover the rough journey, we went out on a bus almost 70 years old! There are tonnes of crags yet to be developed, and several excellent existing sectors, the three most significant of which we will describe below.

<p><b>Instance Name:</b> $(hostname -f) </p>
<p><b>Instance Private Ip Address: </b> ${local_ipv4}</p>
<p><b>Availability Zone: </b> ${az}</p>
<p><b>Virtual Private Cloud (VPC):</b> ${vpc}</p>
</div>
</body>
</html>
" > /var/www/html/index.html

# Clean up the temp files
rm -f /tmp/local_ipv4 /tmp/az /tmp/macid